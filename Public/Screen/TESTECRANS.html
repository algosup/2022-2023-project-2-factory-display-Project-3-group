<!DOCTYPE html><html lang='en'><head><META HTTP-EQUIV='refresh' CONTENT='60'><meta charset='UTF-8'><meta http-equiv='X-UA-Compatible' content='IE=edge'><meta name='viewport'content='width=device-width, initial-scale=1.0'><title>Document</title>
</head>
<style>
    html,body
    {
        height: 100vh;
        width: 100vh;
        overflow-y: hidden;
    }

    img{
    position: fixed; 
    top: 0; 
    left: 0;
    min-width: 100%;
    min-height: 100%;
    }
</style>
<body>
    <div class='container'>
    </div>
</body>
<script type="module">
const response = await fetch('/api/getCampaign');
const campaigns = await response.json();


const container = document.querySelector('.container');
const todayDate = new Date();
const campaignImg = document.createElement('div');

for (let i = 0 ; i < campaigns.length;) {
//     console.log(campaigns[i].startDate.split('T')[1].split(':')[0])  // HOUR DB
//    console.log(campaigns[i].startDate.split('T')[1].split(':')[1])  // MINUTE DB 
//    console.log(campaigns[i].startDate.split('T')[0].split('-')[2])  // day
//    console.log(todayDate.getUTCHours())   // Hour
//    console.log(todayDate.getMinutes())   // MINUTE
//    console.log(todayDate.getUTCDate())    // DAY

checkCampaign: while(campaigns[i].screen == 'Ecran1' && (campaigns[i].startDate.split('T')[1].split(':')[0]) == todayDate.getUTCHours() && campaigns[i].startDate.split('T')[1].split(':')[1] == todayDate.getMinutes() && campaigns[i].startDate.split('T')[0].split('-')[2] == todayDate.getUTCDate()){
        campaignImg.innerHTML = `<img src="data:image/png;base64,${campaigns[i].img.data}">`;
        container.append(campaignImg); // append the img to the container

             checkCampaign2:  while(((campaigns[i].endDate.split('T')[1].split(':')[0]) != todayDate.getUTCHours() && campaigns[i].endDate.split('T')[1].split(':')[1] != todayDate.getMinutes() && campaigns[i].endDate.split('T')[0].split('-')[2] != todayDate.getUTCDate())){
                 continue
                 
         }
           
}
i++
}; 
</script>
</html>